<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Adeniji Aliu Adeyemi">
  <meta name="description" content="A Digital Evaluation Plaftform for varous sector">
    
  <!--Css for login page-->
  <link type="text/css" rel="stylesheet" href="style.css" />

  <!--Css for Quiz page-->
  <link type="text/css" rel="stylesheet" href="style2.css" />

  <!--Css for Calculator-->
  <link type="text/css" rel="stylesheet" href="style3.css" />

    <!--Css for Result page-->
    <link type="text/css" rel="stylesheet" href="style4.css" />
  
    <!-- Include jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Include Sweetalert CDN -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  
  <title>Digital Evaluation Platform</title>
</head>
<body>
   <!--Login Page-->
  <div class="loginPage" id="loginPage">
    <h1 style="font-family:Arial, Helvetica, sans-serif; font-size: 2.6em; letter-spacing: .05em; color:blue;">Digital Evaluation Platform</h1><br>
  <i><strong>Bridging the Gap from Paper-Based to Computer-Based Testing</strong></i><br><br>
 
    <h1 class="nameRequest">Enter your name, please</h1>
    <form>
      <small class="warning" id="warning" style="color:red";></small><br>
      <input type="text" name="userName" id="userName">
      <input type="submit" value="Start Exam" onclick="startTimer();" id="loginBtn">
    </form>
  </div>
  <!--End Login Page-->


  <!--Header container-->
  <div class="headerContainer" id="headerContainer">
      <!--Caclulator-->
    <button id="calc_btn" class="calc_btn">Calculator</button>
    <!--Welcome-->
    <h1 class="welcome" id="welcome"></span></h1>
    <!--End of Welcome-->
    <div class="modal" id="myModal">
      <!-- start of calculator -->
      <span class="close" id="close">&times;</span>
      <form class="calculator">
          <input type="text" name="answer">  <!-- text input -->
          <br>
          <!-- row 1 -->
          <input type="button" id="button1" value="1" onclick="answer.value += '1'">
          <input type="button" id="button1" value="2" onclick="answer.value += '2'">
          <input type="button" id="button1" value="3" onclick="answer.value += '3'">
          <input type="button" id="button1" value="+" onclick="answer.value += '+'">
          <br>
          <input type="button" id="button1" value="4" onclick="answer.value += '4'">
          <input type="button" id="button1" value="5" onclick="answer.value += '5'">
          <input type="button" id="button1" value="6" onclick="answer.value += '6'">
          <input type="button" id="button1" value="-" onclick="answer.value += '-'">
          <br>
          <input type="button" id="button1" value="7" onclick="answer.value += '7'">
          <input type="button" id="button1" value="8" onclick="answer.value += '8'">
          <input type="button" id="button1" value="9" onclick="answer.value += '9'">
          <input type="button" id="button1" value="*" onclick="answer.value += '*'">
          <br>
          <input type="button" id="button1" value="C" onclick="answer.value = ''">
          <input type="button" id="button1" value=0 onclick="answer.value += '0'">
          <input type="button" id="button1" value="=" onclick="answer.value= eval(answer.value); ">
          <input type="button" id="button1" value="/" onclick="answer.value += '/'">
          
          <br>
          <input type="button" id="button1" value="." onclick="answer.value += '.'">
          
        </form>
    <!-- end of calculator -->
    </div>
    <!--Endof Caclulator-->

    <!--Submit-->
    <button class="submitExam" id="submitExam">Submit</button>
    <!--End of Submit-->

    <!--Countdown Timer-->
    <h1 class="timeLeft" id="timeLeft">00:00:00</h1>
    <!--End Countdown Timer-->

    <p class="warningMsg" id="warningMsg"></p>
    
    
  </div>
  <!--End Header container-->


<!--Quiz Container-->
<div class="quizContainer" id="quizContainer">
  <form id="quizForm" name="quizForm">
    
  </form>
  <div class="buttons">
    <button id="prevButton">Prev</button>
    <button id="nextButton">Next</button>
  </div>
  
</div>
<!--End quiz container-->

<!--Show result-->
<section id="resultContainer" class="resultContainer">
  <h4 id="slip" class="slip"> DIGITAL EVALUATION PLATFORM </h4>
  <hr>
  <div id="student" class="student">
     <h3 id="cand" class="cand" style="text-decoration: underline; text-align: center; color:green;"> Candidate results</h3>
     <h2 id="Score" class="Score" style="font-weight: bold; font-size: 40px;  color: #0400ff;"></h2>
     
   </div>
      
   </div>
   <div id="details" class="details" text-decoration:underline;">
     <h3> Examination Details</h3>
   </div>
   
   <div id="user" class="user">
      
   </div>
 <br> 
   <div id="print-content" class="print-content" style="float: left; margin-top: 10px;">
    <button id="btn" style="font-size: 15px;  font-weight: bold;"  onclick="window.print()">Print result</button>     
 </div>

 <div id="print-content" class="print-content" style="float: right; margin-top: 10px;">
<button style="font-size: 15px;  font-weight: bold; background-color: #4caf50;" onclick="location.reload();">Retake Quiz</button>
</div>
</section>
<!--End show result-->

<footer class="footer">
  <div>&copy; Copyright 2024</div>
  <div>Powered by: Adeniji Aliu Adeyemi</div>
</footer>

 
 <!--<script type="text/javascript" src="script.js" />-->
 <script>
    var myModal = document.getElementById("myModal");
var close_btn = document.getElementById("close");
var calc_btn = document.getElementById("calc_btn");

var resultContainer = document.getElementById("resultContainer");
resultContainer.style.display = "none";

var headerContainer = document.getElementById("headerContainer");
headerContainer.style.display = "none";

var nextButton = document.querySelector("#nextButton");
nextButton.style.display = "none";
nextButton.addEventListener("click", nextQuestion);

var prevButton = document.querySelector("#prevButton");
prevButton.style.display = "none";
nextButton.addEventListener("click", nextQuestion)
prevButton.addEventListener("click", prevQuestion)
//Questions
var allQuestions = [
  {
    question: "1. Who is the father of computer?",
    choices: ["Charles Babbage", "Tony Elumelu", "Michael Faraday", "Ada Lovelace"],
    answer: 0
  },
  {
    question: "2. What is the longest key on the keyboard?",
    choices: ["Enter Key", "Spacebar", "Shift key", "Control key"],
    answer: 1
  },
  {
    question: "3. Which of these application packages is mostly used by computer users?",
    choices: ["CorelDraw", "Ms Access", "Ms Excel", "Ms Word"],
    answer: 3
  },
  {
    question: "4. The function of an assembler is to _________",
    choices: ["convert basic language to machine language", "convert high level language to machine language", "convert assembly language to machine language", "convert assembly language into high level language"],
    answer: 2
  },
  {
    question: "5. A computer can't boot if it does not have ____________",
    choices: ["compiler", "Loader", "OS", "Assembler"],
    answer: 2
  },
  {
    question: "6. Fire fox is an example of __________",
    choices: ["System software", "Application package", "Application software", "Computer tools."],
    answer: 2
  },
  {
    question: "7. The Caps key on a keyboard is used to___________",
    choices: ["move to previous page", "Delete files", "Switch between upper and lower case letters", "Space texts"],
    answer: 2
  },
  {
    question: "8. From where can the name of a user account be changed?",
    choices: ["Setting", "Computer name", "Code panel", "Control panel"],
    answer: 3
  },
  {
    question: "9. For what does WAN stand?",
    choices: ["World application network", "Wide area network", "Wide acreage network", "Work arrangement network"],
    answer: 1
  },
  {
    question: "10. The acronym IP address has its full meaning to be _________",
    choices: ["Internet protocol", "Internet password", "International processing", "Internet processing"],
    answer: 0
  }

];

var index = 0;
//Storing in local storage
localStorage.setItem('allQuestions', JSON.stringify(allQuestions));

//Getting it back as a string - serialization
var stringQuestions = localStorage.getItem('allQuestions');

//Getting itback as JS object - Deserialization
allQuestions = JSON.parse(stringQuestions);



close_btn.onclick = function () {
  myModal.style.display = "none";
};
calc_btn.onclick = function () {
  myModal.style.display = "block";
};
window.onclick = function (event) {
  if (event.target == myModal) {
    myModal.style.display = "none";
  }

};

var playerArray = [];
localStorage.setItem('playerArray', JSON.stringify(playerArray));


var loginBtn = document.querySelector("#loginBtn");
var userName = document.getElementById("userName").value;
var warning = document.querySelector("#warning");
var loginPage = document.getElementById("loginPage");

loginBtn.addEventListener('click', checkForm);

function checkForm(e) {
  e.preventDefault();
  var user = document.getElementById("userName").value;
  if (user === "") {
    var errMsg = document.querySelector("#warning");
    errMsg.innerHTML = "Username cannot empty"
  }
  else {
    logIn(user)
  }
}

function Player(user) {
  this.userName = user;
  this.total = 0;
  this.storeScores = [];
  this.storedAnswers = [];
  this.answerAt = 0;
  this.finished = true;
}

function logIn(user) {
  document.getElementById("loginPage").style.display = "none";
  resultContainer.style.display = "none";
  document.getElementById("headerContainer").style.display = "block";
  document.getElementById("quizContainer").style.display = "block";

  var timeLeft = document.getElementById("timeLeft");

  //results.innerHTML = "";
  player = new Player(user);
  playerArray.push(player);
  localStorage.setItem("playerArray", JSON.stringify(playerArray));


  var playerString = localStorage.getItem("playerArray");
  playerArray = JSON.parse(playerString);
  console.log(playerArray);
  // document.getElementById('login').style.display = "none";

  for (var i = 0; i < playerArray.length; i++) {
    var player = playerArray[i];
    if (player.userName === user) {
      //console.log(player);
      actualPlayer = player;
      var storedAnswers = actualPlayer.storedAnswers;
      index = actualPlayer.answerAt;
      var welcome = document.getElementById("welcome")
      welcome.innerHTML = "Welcome to this Digital Evaluation Platform, " + actualPlayer.userName + "!";

      userName = "";
      //code to start the exam imediately
      index = actualPlayer.answerAt;

      if (actualPlayer.finished) {
        actualPlayer.storedAnswers.length = 0;  //empty the array
        actualPlayer.finished = false;
        index = 0;
      }

      var stringQuestions = localStorage.getItem("allQuestions");
      allQuestions = JSON.parse(stringQuestions);
      quizLength = allQuestions.length;


      showQuestion();
      //document.getElementById("prevButton").style.display = 'none';

      //document.getElementById("headerContainer").style.display = 'block';

    }
  }
}
//end of code to start the exam


function showQuestion() {
  var quizForm = document.getElementById("quizForm");

  showQuizButtons();
  if (index === quizLength) {
    return;
  }
  // display of question at given index:
  quizForm.classList.remove("hide");
  // var form = document.quizForm
  // form.innerHTML = "";
  var quizItem = allQuestions[index];
  var q = document.createElement("h3");
  var text = document.createTextNode(quizItem.question);

  var storedAnswers = actualPlayer.storedAnswers;
  var storedAnswer = storedAnswers[index];
  q.appendChild(text);
  quizForm.appendChild(q);

  // display of choices, belonging to the questions at given index:
  choices = allQuestions[index].choices;

  for (var i = 0; i < choices.length; i++) {
    var div = document.createElement("div");
    div.classList.add("radio");


    var input = document.createElement("input");
    input.setAttribute("id", i);
    input.setAttribute("type", "radio");
    input.setAttribute("name", "question");




    if (i === quizItem.answer) {

      input.setAttribute("value", "1");
    } else {
      input.setAttribute("value", "0");
    }


    //if question has been answered already
    if (storedAnswer) {
      var id = storedAnswer.id;
      if (i == id) {
        // if question is already answered, id has a value
        input.setAttribute("checked", "checked");

      }
    }

    //if radiobutton is clicked, the chosen answer is stored in array storedAnswers
    input.addEventListener("click", storeAnswer);


    var label = document.createElement("label");
    label.setAttribute("class", "radio-label")
    label.setAttribute("for", i);
    var choice = document.createTextNode(choices[i]);
    label.appendChild(choice);
    div.appendChild(input);
    div.appendChild(label);
    quizForm.appendChild(div);

  }
}

function storeAnswer(e) {
  var element = e.target;
  var answer = {
    id: element.id,
    value: element.value
  }
  actualPlayer.storedAnswers[index] = answer;

}


function showQuizButtons() {
  //prevButton.classList.add("hide");
  document.getElementById("nextButton").style.display = "block";
  var quizLength = allQuestions.length
  if (index === 0) {
    //there is no prev question when first question is shown
    prevButton.classList.add("hide");
  }
  if (index > 0) {
    prevButton.classList.remove("hide");
  }
  if (index === quizLength) {
    console.log("True")
    //only if last question is shown user can see the score
    //scoreButton.classList.remove("hide");
    document.getElementById("nextButton").style.display = "none";
    //prevButton still visible so user can go back and change answers
    var h2 = document.createElement("h2");
    h2.innerHTML = "sorry no more question. click the SUBMIT button ";
    quizForm.appendChild(h2);
    // document.getElementById('quizButtons').style.display = 'none';
    // document.getElementById('score').style.display = 'block';

  }
  else {
    nextButton.classList.remove("hide");
    //scoreButton.classList.add("hide");
  }
}


function prevQuestion() {
  if (index === 1) {
    //there is no prev question when first question is shown
    document.getElementById("prevButton").style.display = 'none';
  }
  //shows prev question, with chosen answer checked
  index--;
  //var form = document.quizForm
  //form.innerHTML = "";
  quizForm.innerHTML = ""
  $("#quizForm").fadeOut(0, function () {
    var show = showQuestion();
    $(this).attr('innerHTML', 'show').fadeIn(300);
  });

}

function nextQuestion() {

  index++;
  // warning.innerHTML = "";
  //var form = document.quizForm
  //form.innerHTML = "";
  quizForm.innerHTML = ""
  $("#quizForm").fadeOut(0, function () {

    var show = showQuestion();
    $(this).attr('innerHTML', 'show').fadeIn(300);
  });
  document.getElementById("prevButton").style.display = 'block';

}

function showScore() {
  var totalScore = 0;
  var storedAnswers = actualPlayer.storedAnswers

  for (var i = 0; i < storedAnswers.length; i++) {
    var score = parseInt(storedAnswers[i].value);
    totalScore += score;
  }
  console.log(totalScore)
  var percentage = (totalScore / allQuestions.length) * 100
  console.log(percentage.toFixed(2) + "%")
}
var submitExam = document.querySelector("#submitExam");
submitExam.addEventListener("click", showScore);

let created = new Date()
console.log(created.toLocaleString("en-US"))


var timeline = 60 * 1;
var secs = parseInt(timeline % 60);
var mins = parseInt(timeline / 60);

function countDown() {
  document.querySelector("#timeLeft").innerHTML = `Time Left: ${mins} Mins:${secs} Secs`;
  if (timeline <= 30) {
    document.querySelector("#timeLeft").style.color = "red";
    document.querySelector("#warningMsg").style.color = "red";
    document.querySelector("#warningMsg").innerHTML = "OOPS! You have less thn 30 seconds";
  }
  if (timeline <= 0) {
    console.log("SUBMIT")
    document.querySelector("#quizContainer").style.display = "none";
    document.querySelector("#headerContainer").style.display = "none";
    document.querySelector("#welcome").style.display = "none";
    document.querySelector("#resultContainer").style.display = "block";

    var totalScore = 0;
    var storedAnswers = actualPlayer.storedAnswers;

    for (i = 0; i < storedAnswers.length; i++) {
      var score = parseInt(storedAnswers[i].value);
      totalScore += score;
    }

    percentage = (totalScore / allQuestions.length) * 100;
    
    //display score percentage area
    
    var created = new Date();

    document.querySelector("#Score").innerHTML = `${totalScore} / ${allQuestions.length}`;

    document.querySelector('#user').innerHTML = "<b>Username: </b>" 
    + actualPlayer.userName + "<br>" + "<br>" + "<b>Subject: </b>COMPUTER STUDIES" 
    + "<br>" + "<br>" + "<b>Exam Date: </b>" + created.toLocaleString("en-US") + "<br>"+ "<br>" 
    + "<b>Total Score: </b>" + totalScore + " <b>out of</b> "+allQuestions.length+" questions" + "<br>"+"<br>"
    +"<b>Percentage: </b>"+percentage.toFixed(2)+" %";

    //results.innerHTML = output;
    actualPlayer.score = totalScore;
    actualPlayer.storedScores.push(totalScore);
    
    

    setTimeout(1);
  } else {
    timeline = timeline - 1
    mins = parseInt(timeline / 60);
    secs = parseInt(timeline % 60);

    setTimeout("countDown()", 1000);
  }
}

function startTimer() {
  setTimeout("countDown()", 1000);
}
//adding sweet Alert functionality
document.getElementById("submitExam").addEventListener("click", ()=>{
  Swal.fire({
    title: 'Are you sure you want to submit this Exam?',
    text: 'Once submitted, you cannot undo this action!',
    icon: 'warning',
    showCancelButton: true,
    confirmButtonText: 'Yes, submit it!',
    cancelButtonText: 'No, cancel!',
    reverseButtons: true
  }).then((result) => {
    if (result.isConfirmed) {
      // If the user confirms, submit the form
      //this.submit();
      console.log("SUBMIT")
      document.querySelector("#quizContainer").style.display = "none";
      document.querySelector("#headerContainer").style.display = "none";
      document.querySelector("#welcome").style.display = "none";
      document.querySelector("#resultContainer").style.display = "block";

      var totalScore = 0;
      var storedAnswers = actualPlayer.storedAnswers;

      for (i = 0; i < storedAnswers.length; i++) {
        var score = parseInt(storedAnswers[i].value);
        totalScore += score;
      }

      percentage = (totalScore / allQuestions.length) * 100;
      
      //display score percentage area
      
      var created = new Date();

      document.querySelector("#Score").innerHTML = `${totalScore} / ${allQuestions.length}`;

      document.querySelector('#user').innerHTML = "<b>Username: </b>" 
      + actualPlayer.userName + "<br>" + "<br>" + "<b>Subject: </b>COMPUTER STUDIES" 
      + "<br>" + "<br>" + "<b>Exam Date: </b>" + created.toLocaleString("en-US") + "<br>"+ "<br>" 
      + "<b>Total Score: </b>" + totalScore + " <b>out of</b> "+allQuestions.length+" questions" + "<br>"+"<br>"
      +"<b>Percentage: </b>"+percentage.toFixed(2)+" %";

      //results.innerHTML = output;
      actualPlayer.score = totalScore;
      actualPlayer.storedScores.push(totalScore);
      
      setTimeout(1);
};
  });
});  
 </script>
</body>
</html>